#!/usr/bin/env python3
"""Create feature list enum from code."""
from pyatv import interface

FEATURE_TEMPLATE = """# This enum is generated by scripts/features.py
class FeatureName(Enum):
    \"\"\"All supported features.\"\"\"

{enum}
"""


ENUM_VALUE_TEMPLATE = """    {name} = {index}
    \"\"\"{doc}\"\"\"
"""


def main():
    """Script starts here."""
    features = interface._ALL_FEATURES
    enum_values = "\n".join(
        ENUM_VALUE_TEMPLATE.format(name=tmp[0], index=index, doc=tmp[1])
        for index, tmp in features.items()
    )
    print(FEATURE_TEMPLATE.format(enum=enum_values))

    print("Next free index:", max(features.keys()) + 1)


if __name__ == "__main__":
    main()
