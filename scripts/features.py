"""Create feature list enum from code."""
from pyatv import interface

FEATURE_TEMPLATE = """# This enum is generated by scripts/features.py
class FeatureName(Enum):
    \"\"\"All supported features.\"\"\"

{enum}
"""


def main():
    """Script starts here."""
    features = interface._ALL_FEATURES
    enum_values = "\n".join(f"    {name} = {index}" for index, name in features.items())
    print(FEATURE_TEMPLATE.format(enum=enum_values))

    print("Next free index:", max(features.keys()) + 1)


if __name__ == "__main__":
    main()
